angular.module("ionic-timepicker", ["ionic", "ionictimepicker.templates"]).directive("ionicTimePicker", ["$ionicPopup", function (e) { return { restrict: "AE", replace: !0, scope: { etime: "=etime", format: "=format", step: "=step" }, link: function (t, i) { i.on("click", function () { var i = { epochTime: t.etime, step: t.step, format: t.format }; t.time = { hours: 0, minutes: 0, meridian: "" }; var m = new Date(i.epochTime); t.increaseHours = function () { 12 == i.format && (12 != t.time.hours ? t.time.hours += 1 : t.time.hours = 1), 24 == i.format && (23 != t.time.hours ? t.time.hours += 1 : t.time.hours = 0) }, t.decreaseHours = function () { 12 == i.format && (t.time.hours > 1 ? t.time.hours -= 1 : t.time.hours = 12), 24 == i.format && (t.time.hours > 0 ? t.time.hours -= 1 : t.time.hours = 23) }, t.increaseMinutes = function () { t.time.minutes != 60 - i.step ? t.time.minutes += i.step : t.time.minutes = 0 }, t.decreaseMinutes = function () { 0 != t.time.minutes ? t.time.minutes -= i.step : t.time.minutes = 60 - i.step }, 12 == i.format && (t.time.meridian = m.getHours() >= 12 ? "PM" : "AM", t.time.hours = m.getHours() > 12 ? m.getHours() - 12 : m.getHours(), t.time.minutes = m.getMinutes(), 0 == t.time.hours && "AM" == t.time.meridian && (t.time.hours = 12), t.changeMeridian = function () { t.time.meridian = "AM" === t.time.meridian ? "PM" : "AM" }, e.show({ templateUrl: "time-picker-12-hour.html", title: "<strong>12-Hour Format</strong>", subTitle: "", scope: t, buttons: [{ text: "Cancel" }, { text: "Set", type: "button-positive", onTap: function () { t.loadingContent = !0; var e = 0; e = 12 != t.time.hours ? 60 * t.time.hours * 60 + 60 * t.time.minutes : 60 * t.time.minutes, "AM" === t.time.meridian ? e += 0 : "PM" === t.time.meridian && (e += 43200); var i = 60 * (new Date).getTimezoneOffset(); e += i, t.etime = 1e3 * e } }] })), 24 == i.format && (t.time.hours = m.getHours(), t.time.minutes = m.getMinutes(), e.show({ templateUrl: "time-picker-24-hour.html", title: "<strong>24-Hour Format</strong>", subTitle: "", scope: t, buttons: [{ text: "Cancel" }, { text: "Set", type: "button-positive", onTap: function () { t.loadingContent = !0; var e = 0; e = 24 != t.time.hours ? 60 * t.time.hours * 60 + 60 * t.time.minutes : 60 * t.time.minutes; var i = 60 * (new Date).getTimezoneOffset(); e += i, t.etime = 1e3 * e } }] })) }) } } }]);